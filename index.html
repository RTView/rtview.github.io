<!DOCTYPE html>
<html>
<head>
  <title>Arcware Pixel Streaming WebSDK | HTML + JavaScript</title>
  <link rel="stylesheet" href="style.css">
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    #video-container {
      width: 100%;
      height: 100%;
      position: relative;
    }
    #video-container video {
      left: 0;
      top: 0;
    }
    .button-interaction {
      position: absolute;
      width: 200px;
      right: 100px;
      bottom: 20px;
      margin: auto;
      z-index: 9;
    }
  </style>
  <script type="module">
    let Application;
    import * as PixelStreamingWebSdk from "https://unpkg.com/@arcware-cloud/pixelstreaming-websdk@latest/index.esm.js";
    (() => {
      const { ArcwareInit } = PixelStreamingWebSdk;

      const testInteraction = {
        type: 'interact',
        payload: {
          changematerial: '0'
        }
      };

      const initResult = new ArcwareInit(
        {
          shareId: "share-0739295d-e852-4408-901f-65b66fc8eae9"
        },
        {
          initialSettings: {
            StartVideoMuted: true,
            AutoConnect: true,
            AutoPlayVideo: true
          },
          settings: {
            infoButton: true,
            micButton: true,
            audioButton: true,
            fullscreenButton: false,
            settingsButton: true,
            connectionStrengthIcon: true
          },
        }
      );

      Application = initResult.Application;
      Application.getApplicationResponse(
        (response) => console.log("ApplicationResponse", response)
      );

      setTimeout(() =>
        document
          .getElementById("video-container")
          .appendChild(Application.rootElement)
      );
    })();
    window.handleSendCommand = function(command) {
      if (Application) {
        Application.emitUIInteraction(command);
      }
    };
  </script>
</head>

<body>
  <div class="container">
    <div class="product-view">
      <div id="video-container"></div>
    </div>
    <div class="product-details">
      <div class="option">
        <label onclick="toggleDropdown('zip-color')">MODELLO</label>
        <div id="zip-color" class="dropdown-content">
          <button onclick="handleSendCommand({changematerial: '0'})">Cambio Materiale</button>
          <button onclick="handleSendCommand({changematerial: '0'})">Cambio Materiale</button>
        </div>
      </div>
      <div class="option">
        <label onclick="toggleDropdown('fabric')">MATERIALE</label>
        <div id="fabric" class="dropdown-content">
          <button onclick="handleSendCommand({changematerial: '0'})">Cambio Materiale</button>
          <button onclick="handleSendCommand({changematerial: '0'})">Cambio Materiale</button>
        </div>
      </div>
      <div class="option">
        <label onclick="toggleDropdown('fabric-color')">VISUALE</label>
        <div id="fabric-color" class="dropdown-content">
          <button onclick="handleSendCommand({changematerial: '0'})">Cambio Materiale</button>
          <button onclick="handleSendCommand({changematerial: '0'})">Cambio Materiale</button>
        </div>
      </div>
      <!--<div class="option">
        <label for="quantity">Quantit√†</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1">
      </div>
      <div class="price">PREZZO</div>
      <button class="btn" onclick="addToCart()">AGGIUNGI AL CARRELLO</button> -->
    </div> 
  </div>
  <script src="dropdown-menu.js"></script>
</body>
</html>


