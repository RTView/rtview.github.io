<!DOCTYPE html>
<html>
<head>
  <title>RTVIEW - LIGHT-CONFIGURATOR</title>
  <link rel="stylesheet" href="style.css">
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    #video-container {
      width: 100%;
      height: 100%;
      position: relative;
    }
    #video-container video {
      left: 0;
      top: 0;
    }
    .button-interaction {
      position: absolute;
      width: 200px;
      right: 100px;
      bottom: 20px;
      margin: auto;
      z-index: 9;
    }
  </style>
  <script type="module">
    let Application;
    import * as PixelStreamingWebSdk from "https://unpkg.com/@arcware-cloud/pixelstreaming-websdk@latest/index.esm.js";
    (() => {
      const { ArcwareInit } = PixelStreamingWebSdk;

      const testInteraction = {
        type: 'interact',
        payload: {
          changematerial: '0'
        }
      };

      const initResult = new ArcwareInit(
        {
          shareId: "share-0739295d-e852-4408-901f-65b66fc8eae9"
        },
        {
          initialSettings: {
            StartVideoMuted: true,
            AutoConnect: true,
            AutoPlayVideo: true
          },
          settings: {
            infoButton: false,
            micButton: false,
            audioButton: false,
            fullscreenButton: false,
            settingsButton: false,
            connectionStrengthIcon: true
          },
        }
      );

      Application = initResult.Application;
      Application.getApplicationResponse(
        (response) => console.log("ApplicationResponse", response)
      );

      setTimeout(() =>
        document
          .getElementById("video-container")
          .appendChild(Application.rootElement)
      );
    })();
    window.handleSendCommand = function(command) {
      if (Application) {
        Application.emitUIInteraction(command);
      }
    };
  </script>
  <script type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
  </script>
  <script type="text/javascript">
    (function(){
      emailjs.init({
      publicKey: "jGMKHf6zzHbt_y34H",});
    })();
  </script>
</head>

<body>
  <div class="container">
    <div class="product-view">
      <div id="video-container"></div>
    </div>
    <div class="product-details">
      <div class="option">
        <label onclick="toggleDropdown('sedia00'); handleSendCommand({changemesh: 'Sedia00'}); selectModel('Sedia00')">Sedia00</label>
        <div id="sedia00" class="dropdown-content">
          <h3>Primo Materiale</h3>
          <button id="olivia" onclick="handleSendCommand({firstmaterial: 'Olivia'}); selectMaterial('first', 'Olivia')">Olivia</button>
          <button id="sabbia" onclick="handleSendCommand({firstmaterial: 'Sabbia'}); selectMaterial('first', 'Sabbia')">Sabbia</button>
          <button id="blu" onclick="handleSendCommand({firstmaterial: 'Blu'}); selectMaterial('first', 'Blu')">Blu</button>
          <button id="carminio" onclick="handleSendCommand({firstmaterial: 'Carminio'}); selectMaterial('first', 'Carminio')">Carminio</button>
          <h3>Secondo Materiale</h3>
          <button id="frassino" onclick="handleSendCommand({secondmaterial: 'Frassino'}); selectMaterial('second', 'Frassino')">Frassino</button>
          <button id="nocecanaletto" onclick="handleSendCommand({secondmaterial: 'NoceCanaletto'}); selectMaterial('second', 'NoceCanaletto')">NoceCanaletto</button>
        </div>
      </div>
      <div class="option">
        <label onclick="toggleDropdown('sedia01'); handleSendCommand({changemesh: 'Sedia01'}); selectModel('Sedia01')">Sedia01</label>
        <div id="sedia01" class="dropdown-content">
          <h3>Primo Materiale</h3>
          <button id="olivia" onclick="handleSendCommand({firstmaterial: 'Olivia'}); selectMaterial('first', 'Olivia')">Olivia</button>
          <button id="sabbia" onclick="handleSendCommand({firstmaterial: 'Sabbia'}); selectMaterial('first', 'Sabbia')">Sabbia</button>
          <button id="blu" onclick="handleSendCommand({firstmaterial: 'Blu'}); selectMaterial('first', 'Blu')">Blu</button>
          <button id="carminio" onclick="handleSendCommand({firstmaterial: 'Carminio'}); selectMaterial('first', 'Carminio')">Carminio</button>
          <h3>Secondo Materiale</h3>
          <button id="frassino" onclick="handleSendCommand({secondmaterial: 'Frassino'}); selectMaterial('second', 'Frassino')">Frassino</button>
          <button id="nocecanaletto" onclick="handleSendCommand({secondmaterial: 'NoceCanaletto'}); selectMaterial('second', 'NoceCanaletto')">NoceCanaletto</button>
        </div>
      </div>
      <div class="option">
        <label onclick="toggleDropdown('giacca'); handleSendCommand({changemesh: 'Giacca00'}); selectModel('Giacca00')">Giacca</label>
        <div id="giacca" class="dropdown-content">
          <h3>Primo Materiale</h3>
          <button id="olivia" onclick="handleSendCommand({firstmaterial: 'Olivia'}); selectMaterial('first', 'Olivia')">Olivia</button>
          <button id="sabbia" onclick="handleSendCommand({firstmaterial: 'Sabbia'}); selectMaterial('first', 'Sabbia')">Sabbia</button>
          <button id="blu" onclick="handleSendCommand({firstmaterial: 'Blu'}); selectMaterial('first', 'Blu')">Blu</button>
          <button id="carminio" onclick="handleSendCommand({firstmaterial: 'Carminio'}); selectMaterial('first', 'Carminio')">Carminio</button>
          <h3>Secondo Materiale</h3>
          <button id="frassino" onclick="handleSendCommand({secondmaterial: 'Frassino'}); selectMaterial('second', 'Frassino')">Frassino</button>
          <button id="opablack" onclick="handleSendCommand({secondmaterial: 'OpaBlack'}); selectMaterial('second', 'OpaBlack')">OpaBlack</button>
        </div>
      </div>
      <div class="option">
        <label onclick="toggleDropdown('lampada'); handleSendCommand({changemesh: 'Lampada00'}); selectModel('Lampada00')">Lampada</label>
        <div id="lampada" class="dropdown-content">
          <h3>Materiale</h3>
          <button id="orange" onclick="handleSendCommand({firstmaterial: 'Orange'}); selectMaterial('first', 'Orange')">Orange</button>
          <button id="white" onclick="handleSendCommand({firstmaterial: 'White'}); selectMaterial('first', 'White')">White</button>
          <button id="black" onclick="handleSendCommand({firstmaterial: 'Black'}); selectMaterial('first', 'Black')">Black</button>
          <h3>Luci</h3>
          <button onclick="handleSendCommand({light: '0'})">On/Off</button>
        </div>
      </div>
      <div id="total-price">Prezzo Totale*: &euro;<span id="price-value">0.00</span></div>
      <div>
        <input type="text" id="fullName" placeholder="Full Name" required /><br />
        <input type="email" id="email_id" placeholder="Email Id" required /><br />
        <textarea placeholder="Message" id="message" required></textarea><br />
        <button onclick="SendMail()">Send</button>
      </div>
      <div id="note">*I prezzi riportati sono indicativi</div>
    </div> 
  </div>
  <script src="dropdown-menu.js"></script>
  <script src="price-manager.js"></script>
  <script src="mail-manager.js"></script>
</body>
</html>



